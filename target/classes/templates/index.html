<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Inicio - MiTienda</title>
    <script th:src="@{/js/alert.js}"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" th:href="@{/images/favicon.png}">
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
    
    <div class="layout flex flex-col min-h-screen">

        <!-- Header -->
        <div th:replace="~{fragments/header :: header('Inicio')}"></div>

        <main class="flex-1">
        
            <!-- Alertas de sesión -->
            <div th:if="${param.expired}" 
                 class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 m-4 rounded">
                ⏳ Tu sesión ha expirado por inactividad. Por favor, vuelve a iniciar sesión.
            </div>

            <div th:if="${param.concurrent}" 
                 class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 m-4 rounded">
                ⚠️ Tu sesión fue cerrada porque iniciaste sesión en otro dispositivo.
                <b th:text="${param.device}">Otro Navegador</b>
                (IP: <span th:text="${param.ip}">0.0.0.0</span>).
            </div>

            <!-- Hero / Jumbotron -->
            <div th:replace="~{fragments/hero :: hero}"></div>

            <!-- Productos destacados -->
            <div class="max-w-6xl mx-auto px-4 mt-6">
                <h2 class="text-2xl font-bold mb-4">Productos Destacados</h2>

                <div th:if="${productosDestacados.empty}" 
                     class="bg-blue-100 text-blue-700 px-4 py-3 rounded mb-4">
                    No hay productos destacados disponibles en este momento.
                </div>

                <div th:unless="${productosDestacados.empty}" 
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    <div th:each="producto : ${productosDestacados}">
                        <div th:replace="~{fragments/card :: cardHorizontal(producto=${producto})}"></div>
                    </div>

                </div>

            </div>

        </main>

        <!-- Footer -->
        <div th:replace="~{fragments/footer :: footer}"></div>

    </div>

</body>
</html>